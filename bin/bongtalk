#!/usr/bin/env node

var command = require('optimist')
    .usage('Usage : $0 --port [num] --redisurl [url]')
    .alias('p', 'port')
    .describe('p', 'listen port')
    .alias('r', 'redisurl')
    .describe('r', 'redis url');

if (!process.env.PORT) {
    command = command.demand(['port'])
}

var port = process.env.PORT || command.argv.port;
//var redisUrl = process.env.REDISTOGO_URL || command.argv.redisurl;
//var redisUrl = process.env.REDISCLOUD_URL || command.argv.redisurl;
var redisUrl =  command.argv.redisurl || 'redis://talsu.net/';

var BongTalk = require('../').BongTalk;
var talkServer = new BongTalk(port, redisUrl);
talkServer.start();

